/**
 * Transr.js
 * Minimalistic CSS3 Transitions and translations helper with feature detection and fallback
 *
 * Juhani Pelli <juhani.pelli@gmail.com>
 * https://github.com/unkhz/transr.js/
 *
 * MIT License Copyright 2012-2014 Juhani Pelli
 */
!function(a,b){"function"==typeof define&&define.amd?define([],b):a.Transr=b(a)}(this,function(){function a(a){return void 0!==a&&null!==a}function b(){var a,b,c,d=arguments[0],e=q.call(arguments,1);for(a=0,c=e.length;c>a;a++){var f=e[a];if(f)for(b in f)d[b]=f[b]}return d}function c(a){if(t[a])return t[a];var b;void 0!==s.style[a]&&(b=a);for(var c=0,d=["webkit","moz","o","ms"],e=d.length;e>c;c++){var f=d[c]+a.charAt(0).toUpperCase()+a.slice(1);void 0!==document.body.style[f]&&(b=f)}return t[a]=b}function d(a){var b=c(a);return b!==a?"-"+b.replace(/([A-Z])/g,"-$1").toLowerCase():b}function e(a){var b=c("transform");if(!b)return!1;if(void 0!==u[a])return u[a];var d=document.createElement("div");d.style[b]="",d.style[b]=a,document.body.appendChild(d);var e=d.style[b],f="string"==typeof e&&e.length>0;return document.body.removeChild(d),u[a]=f}function f(a,b){var c=b||"translate",d={translate:"px",rotate:"deg",scale:"",skew:"deg"},e=d[c];return void 0===a&&(a="0"+e),"number"==typeof a?a.toString()+e:a}function g(a,b){try{a.removeEventListener("webkitTransitionEnd",b),a.removeEventListener("transitionend",b),a.removeEventListener("oTransitionEnd",b)}catch(c){}}function h(a,b){try{a.addEventListener("webkitTransitionEnd",b),a.addEventListener("transitionend",b),a.addEventListener("oTransitionEnd",b)}catch(c){}}function i(a){a&&(g(a.el,a.onTransitionEnd),clearTimeout(a.endTimeoutId))}function j(a){return 1e3*Number(a.replace(/[^0-9.]/g,""))}function k(a){var b,e=c("transition"),f=c("transitionProperty"),g=c("transitionDuration"),k=c("transitionTimingFunction"),l=(c("transitionDelay"),c(a.property)),m=f&&g&&k&&l?!0:!1;if(!m||a.fail)a.fallback?a.fallback():a.el.style[l]=a.value,a.complete&&a.complete(a.el,a.property);else{var n=a.el,o=(f.replace(/Transition.*$/,""),d(a.property)),p=o+" "+a.duration+" "+a.timingFunction+" "+a.delay,q=j(a.duration)+j(a.delay),r=q+1500,s=!1;a.onTransitionEnd=function(c){c.target===n&&c.propertyName===o&&(s||(s=!0,i(a),a.transitionId&&delete v[a.transitionId],a.resetTransitionAfterTransitionEnd&&(n.style[e]="",n.style[l]=a.value),clearTimeout(b),a.complete&&a.complete(a.el,a.property)))},a.el.style[e]=p,a.el.style[l]===a.value?r=1:(a.el.style[l]=a.value,0===q?r=1:h(a.el,a.onTransitionEnd)),clearTimeout(a.endTimeoutId),a.endTimeoutId=setTimeout(a.onTransitionEnd,r,{target:a.el,propertyName:o}),a.transitionId&&(i(v[a.transitionId]),v[a.transitionId]=a)}}function l(b,c){var d,e,g,h,i,j,k=["translate","rotate","scale","skew"],l=["X","Y","Z"],m=b.el.style[c]+" ";for(d=0,g=k.length;g>d;d++)for(e=0,h=l.length;h>e;e++)i=k[d]+l[e],j=b[i],a(j)&&(m=m.replace(new RegExp(i+"\\([^\\)]*\\)\\s+")," "),m+=i+"("+f(j,k[d])+") ");return m.replace(/\s+$/,"")}function m(d){var f=d.fallback,g=c("transform"),h=d.value?d.value.join?d.value.join(" "):d.value:l(d,g),j=!!h.match(/Z/);d.use3d&&e("translate3d(0,0,0)")||e("translate(0,0)")&&!j||(d.fail=!0),d.immediate&&g&&!d.fail?(d.transitionId&&i(v[d.transitionId]),o(d.el,g,h),d.complete&&d.complete(d.el,"transform")):k(b(d,{property:"transform",value:h,fallback:function(){f?f():g&&h?o(d.el,g,h):(void 0===d.translateX&&void 0===d.translateY||d.el.style.position&&"static"!==d.el.style.position||(d.el.style.position="relative"),a(d.translateX)&&(d.el.style.left=d.translateX),a(d.translateY)&&(d.el.style.top=d.translateY))}}))}function n(b,c){a(b.x)&&(b[c+"X"]=b.x),a(b.y)&&(b[c+"Y"]=b.y),a(b.z)&&(b[c+"Z"]=b.z),m(b)}function o(a,b,d,e,f){var g=c("transition"),h=c(b);if(h)if(g&&a.style[g]){{a.style[g]}a.style[g]="",a.style[h]=d}else a.style[h]=d;else e&&(a.style[e]=void 0!==f?f:d)}function p(a,c,d,e){"[object Array]"!==Object.prototype.toString.call(c)&&(c=[c]);for(var f=0,g=c.length;g>f;f++)a(b({},r,d,c[f]),e)}var q=Array.prototype.slice,r={el:null,duration:"0.5s",timingFunction:"ease",delay:"0s",fallback:null,complete:null,fail:!1,immediate:!1,use3d:!0,resetTransitionAfterTransitionEnd:!0,transitionId:!1},s=document.createElement("div"),t={},u={},v={};return{getStyleProperty:c,canTransform:e,set:o,transition:function(a,b){p(k,a,b)},transform:function(a,b){p(m,a,b)},translate:function(a,b){p(n,a,b,"translate")},rotate:function(a,b){p(n,a,b,"rotate")},scale:function(a,b){p(n,a,b,"scale")},skew:function(a,b){p(n,a,b,"skew")}}});